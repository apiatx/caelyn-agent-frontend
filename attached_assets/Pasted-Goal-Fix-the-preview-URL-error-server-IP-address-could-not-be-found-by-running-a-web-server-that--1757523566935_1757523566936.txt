Goal: Fix the preview URL error “server IP address could not be found” by running a web server that binds to 0.0.0.0 on $PORT, and make the Webview load.

Do this exactly:

Open .replit and set a single run command that starts a long-running web server. It must bind host 0.0.0.0 and port $PORT.

Edit app code so it uses $PORT from env and 0.0.0.0 for host.

Start the app. Wait for “listening” logs.

Verify from the Shell:

echo "PORT=$PORT"

curl -sS http://127.0.0.1:$PORT/ | head should return HTML or text.

Confirm Webview opens and responds with HTTP 200.

Reply with the exact changes you made and the working URL.

Stack specifics. Use the one that matches the project:

Node/Express

Code:

const port = Number(process.env.PORT || 3000);
const host = '0.0.0.0';
app.listen(port, host, () => console.log('listening on', host, port));


.replit:

run = "node index.js"


FastAPI (Uvicorn)

.replit:

run = "uvicorn app:app --host 0.0.0.0 --port $PORT"


Flask

Code:

import os
port = int(os.environ.get("PORT", 8080))
app.run(host="0.0.0.0", port=port)


.replit:

run = "python main.py"


Next.js

Build then start:

run = "npm run build && HOST=0.0.0.0 PORT=$PORT npm run start"


If scripts missing, set:

"scripts": { "build": "next build", "start": "next start" }


Vite dev server

vite.config.js:

export default { server: { host: true, port: process.env.PORT && Number(process.env.PORT) } }


.replit:

run = "vite"


Static site

.replit:

run = "python -m http.server $PORT --bind 0.0.0.0"


Hard requirements:

Do not bind to localhost or 127.0.0.1.

Do not hardcode 3000 or 8000 without using $PORT.

Do not start a command that exits after building or testing. It must keep running.

If a command is missing, add the needed package to replit.nix and rebuild.

If the repl was renamed or forked, use the current Webview URL after Run. Do not use any stale kirk.replit.dev URL.

Acceptance criteria:

curl http://127.0.0.1:$PORT/ returns content.

Webview loads with HTTP 200.

Agent replies with:

The final .replit run line

The host and port it bound to

The first line of curl output

The working Webview URL